<!DOCTYPE html>
<html>

<head>
    <title>Student Survey</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div class="container">
        <h2>Student Survey</h2>
        <div id="studentInfo"></div>
        <form id="surveyForm" onsubmit="return submitSurvey(event)">
            <div class="question">

                <h4>
                    
                    RISE Observation Rubric for Teachers (Grades 6-8)<br>
                    Scale:<br>
                    &#x2022;    3 - Consistently Demonstrates (3 or more times in a month)<br>
                    &#x2022;    2 - Sometimes Demonstrates (1-2 times in a month)<br>
                    &#x2022;    1 - Rarely Demonstrates (Not observed or only with prompting)<br>
                </h4>
                
                <div class="highlight-box-respect">
                    
                    <h2>Respect</h2>

                    <p>The student waits for their turn to speak in class discussions.(Focus: Observable behaviour in group settings)</p>
                    <div class="radio-group">
                        <input type="radio" name="q1" value="1" required> 1 - Rarely Demonstrates (Not observed or only with prompting) <br>
                        <input type="radio" name="q1" value="2"> 2 - Sometimes Demonstrates (1-2 times in a month) <br>
                        <input type="radio" name="q1" value="3"> 3 - Consistently Demonstrates (3 or more times in a month) <br>
                    </div>
                    <input type="text" class="remarks" placeholder="Why did you choose this score?(Optional)">
                
                    <div class="question">
                        <p>The student uses respectful greetings and language when addressing peers, teachers or staff.(Focus: Measurable interaction style)</p>
                        <div class="radio-group">
                            <input type="radio" name="q2" value="1" required> 1 - Rarely Demonstrates (Not observed or only with prompting) <br>
                            <input type="radio" name="q2" value="2"> 2 - Sometimes Demonstrates (1-2 times in a month) <br>
                            <input type="radio" name="q2" value="3"> 3 - Consistently Demonstrates (3 or more times in a month) <br>

                        </div>
                        <input type="text" class="remarks" placeholder="Why did you choose this score?(Optional)">
                    </div>
                    
                    <div class="question">
                        <p>The student does not interrupt or contradict others during discussions.(Focus: Peer respect in real-time conversations)</p>
                        <div class="radio-group">
                            <input type="radio" name="q3" value="1" required> 1 - Rarely Demonstrates (Not observed or only with prompting)s <br>
                            <input type="radio" name="q3" value="2"> 2 - Sometimes Demonstrates (1-2 times in a month)<br>
                            <input type="radio" name="q3" value="3"> 3 - Consistently Demonstrates (3 or more times in a month) <br>

                        </div>
                        <input type="text" class="remarks" placeholder="Why did you choose this score?(Optional)">
                    </div>
            
                </div>
                <div class="highlight-box-integrity">
                    
                    <h2>Integrity</h2>
            
                    <div class="question">
                        <p>The student reports their own mistakes or rule violations to a teacher or adult.(Focus: Proactive admission of responsibility)
                        </p>
                        <div class="radio-group">
                            <input type="radio" name="q4" value="1" required> 1 - Rarely Demonstrates (Not observed or only with prompting) <br>
                            <input type="radio" name="q4" value="2"> 2 - Sometimes Demonstrates (1-2 times in a month) <br>
                            <input type="radio" name="q4" value="3"> 3 - Consistently Demonstrates (3 or more times in a month) <br>

                        </div>
                        <input type="text" class="remarks" placeholder="Why did you choose this score?(Optional)">
                    </div>
                    
                    
                    <div class="question">
                        <p>The student follows classroom or school rules without reminders.(Focus: Independent compliance with set expectations)
                        </p>
                        <div class="radio-group">
                            <input type="radio" name="q5" value="1" required> 1 - Rarely Demonstrates (Not observed or only with prompting) <br>
                            <input type="radio" name="q5" value="2"> 2 - Sometimes Demonstrates (1-2 times in a month) <br>
                            <input type="radio" name="q5" value="3"> 3 - Consistently Demonstrates (3 or more times in a month) <br>

                        </div>
                        <input type="text" class="remarks" placeholder="Why did you choose this score?(Optional)">
                    </div>
                    <div class="question">
                        <p>The student avoids joining in when others break rules.(Focus: Observable self-regulation in social contexts)
                        </p>
                        <div class="radio-group">
                            <input type="radio" name="q6" value="1" required> 1 - Rarely Demonstrates (Not observed or only with prompting) <br>
                            <input type="radio" name="q6" value="2"> 2 - Sometimes Demonstrates (1-2 times in a month) <br>
                            <input type="radio" name="q6" value="3"> 3 - Consistently Demonstrates (3 or more times in a month) <br>

                        </div>
                        <input type="text" class="remarks" placeholder="Why did you choose this score?(Optional)">
                    </div>
                </div>
                <div class="highlight-box-skills">
                    
                    <h2>Skills</h2>
                    
                    <div class="question">
                        <p>The student completes assigned work on time without frequent reminders.(Focus: Accountability and task management)
                        </p>
                        <div class="radio-group">
                            <input type="radio" name="q7" value="1" required> 1 - Rarely Demonstrates (Not observed or only with prompting) <br>
                            <input type="radio" name="q7" value="2"> 2 - Sometimes Demonstrates (1-2 times in a month) <br>
                            <input type="radio" name="q7" value="3"> 3 - Consistently Demonstrates (3 or more times in a month)<br>

                        </div>
                        <input type="text" class="remarks" placeholder="Why did you choose this score?(Optional)">
                    </div>
                    <div class="question">
                        <p>The student offers a solution when a challenge arises in class tasks.(Focus: Problem-solving initiative)
                        </p>
                        <div class="radio-group">
                            <input type="radio" name="q8" value="1" required> 1 - Rarely Demonstrates (Not observed or only with prompting) <br>
                            <input type="radio" name="q8" value="2"> 2 - Sometimes Demonstrates (1-2 times in a month) <br>
                            <input type="radio" name="q8" value="3"> 3 - Consistently Demonstrates (3 or more times in a month) <br>

                        </div>
                        
                        <input type="text" class="remarks" placeholder="Why did you choose this score?(Optional)">
                            
                    </div>
                        <div class="question">
                            <p>The student contributes to a shared task during group work.(Focus: Active participation in collaborative settings)</p>
                            <div class="radio-group">
                                <input type="radio" name="q9" value="1" required> 1 - Rarely Demonstrates (Not observed or only with prompting) <br>
                                <input type="radio" name="q9" value="2"> 2 - Sometimes Demonstrates (1-2 times in a month) <br>
                                <input type="radio" name="q9" value="3"> 3 - Consistently Demonstrates (3 or more times in a month) <br>

                            </div>
                            <input type="text" class="remarks" placeholder="Why did you choose this score?(Optional)">
                        </div>
                
                </div>
                
            </div>
            <div class="highlight-box-empathy">
                
                <h2>Empathy</h2>
                
                <div class="question">
                    <p>The student checks on a peer who is upset, left out, or struggling.(Focus: Action-oriented compassion)
                    </p>
                    <div class="radio-group">
                        <input type="radio" name="q10" value="1" required> 1 - Rarely Demonstrates (Not observed or only with prompting) <br>
                        <input type="radio" name="q10" value="2"> 2 - Sometimes Demonstrates (1-2 times in a month) <br>
                        <input type="radio" name="q10" value="3"> 3 - Consistently Demonstrates (3 or more times in a month) <br>

                    </div>
                    <input type="text" class="remarks" placeholder="Why did you choose this score?(Optional)">
                </div>
                <div class="question">
                    <p>HThe student volunteers or participates in school service activities.(Focus: Observable contribution to the community)
                    </p>
                    <div class="radio-group">
                        <input type="radio" name="q11" value="1" required> 1 - Rarely Demonstrates (Not observed or only with prompting) <br>
                        <input type="radio" name="q11" value="2"> 2 - Sometimes Demonstrates (1-2 times in a month) <br>
                        <input type="radio" name="q11" value="3"> 3 - Consistently Demonstrates (3 or more times in a month) <br>

                    </div>
                    <input type="text" class="remarks" placeholder="Why did you choose this score?(Optional)">
                </div>
                <div class="question">
                    <p>HThe student helps resolve a disagreement between peers calmly.(Focus: Constructive conflict resolution)
                    </p>
                    <div class="radio-group">
                        <input type="radio" name="q12" value="1" required> 1 - Rarely Demonstrates (Not observed or only with prompting) <br>
                        <input type="radio" name="q12" value="2"> 2 - Sometimes Demonstrates (1-2 times in a month) <br>
                        <input type="radio" name="q12" value="3"> 3 - Consistently Demonstrates (3 or more times in a month) <br>

                    </div>
                    <input type="text" class="remarks" placeholder="Why did you choose this score?(Optional)">
                </div>
            </div>
            <div class="comments-section">
                <p>Please list any specific notable actions or instances where the student demonstrated positive
                    behaviors aligning with the values of respect, integrity, skills, or empathy this month. For
                    example, you might mention if the student found a small lost item and promptly returned it to the
                    appropriate staff member, or if they assisted a struggling classmate with a difficult concept.
                    Please list as many instances as apply:
                </p>
                <textarea placeholder="(optional, but please list as many as you can)" required></textarea>
            </div>
            <button type="submit">Submit</button>
        </form>
    </div>
    <script>
        window.onload = function () {
            const params = new URLSearchParams(window.location.search);
            const studentInfo = document.getElementById('studentInfo');
            studentInfo.innerHTML = `
                <p><strong>Name:</strong> ${params.get('name')}</p>
                <p><strong>Roll No:</strong> ${params.get('rollNo')}</p>
            `;
        };

        function submitSurvey(event) {
            event.preventDefault();

            const params = new URLSearchParams(window.location.search);
            const studentName = params.get('name');
            const rollNo = params.get('rollNo');

            const answers = [];
            const remarks = [];
            for (let i = 1; i <= 12; i++) {
                answers.push(document.querySelector(`input[name="q${i}"]:checked`)?.value || '');
                const remarkInput = document.querySelectorAll('.remarks')[i - 1];
                remarks.push(remarkInput?.value || '');
            }

            const comments = document.querySelector('textarea').value;
            const timestamp = new Date().toISOString();
            const teacherName = localStorage.getItem('currentTeacher') ?
                JSON.parse(localStorage.getItem('currentTeacher')).name : '';

            const data = {
                timestamp,
                teacherName,
                studentName,
                rollNo,
                answers,
                remarks,
                comments
            };

            console.log(data);

            fetch('https://script.google.com/macros/s/AKfycbypqbKP1WRAFXwYnAHRLLFEnsdd1S2GR4SWu1yyoEV9TqB83F68OHX9xsl6_lbxeUxS/exec', {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(() => {
                const progressStatus = JSON.parse(localStorage.getItem('surveyProgress') || '{}');
                const teacherData = JSON.parse(localStorage.getItem('currentTeacher') || '{}');
                const key = `${teacherData.username}_${studentName}`;

                // Increment submission count
                progressStatus[key] = (progressStatus[key] || 0) + 1;
                localStorage.setItem('surveyProgress', JSON.stringify(progressStatus));

                alert('Survey submitted successfully!');
                window.location.href = 'index.html';
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Failed to submit survey. Please try again.');
            });

            return false;
        }
    </script>
</body>

</html>
